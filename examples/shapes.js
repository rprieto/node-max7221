var _ = require('underscore');
var max7221 = require('../max7221');

var shapes = max7221.matrices([
    '    1   ',  ' 11  11 ',  '        ',  '11111111',  '        ',
    '    11  ',  '11111111',  '   11   ',  '11111111',  ' 11  11 ',
    '    111 ',  '11 11 11',  ' 11  11 ',  '11    11',  ' 11  11 ',
    '11111111',  '11    11',  '11    11',  '11    11',  '        ',
    '11111111',  '11    11',  '11    11',  '11    11',  '1      1',
    '    111 ',  ' 11  11 ',  ' 11  11 ',  '11    11',  ' 11  11 ',
    '    11  ',  '  1111  ',  '   11   ',  '11111111',  '  1111  ',
    '    1   ',  '   11   ',  '        ',  '11111111',  '        ',
]);

max7221.configure({
    dataIn: 22,
    load: 24,
    clock: 26
});

max7221.open(function() {
    max7221.sequence(_.shuffle(shapes), 500);
});

process.on('SIGTERM', function() {
    max7221.close();
});
